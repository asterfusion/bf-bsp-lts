/*******************************************************************************
 * Copyright (c) 2015-2020 Barefoot Networks, Inc.
 * SPDX-License-Identifier: BSD-3-Clause
 *
 * $Id: $
 *
 ******************************************************************************/

#include <bf_mav_qsfp_i2c_lock.h>
#include <bf_pltfm_cp2112_intf.h>
#include <bf_pltfm_si5342.h>
#include <bf_types/bf_types.h>
#include <bfutils/uCli/ucli.h>
#include <bfutils/uCli/ucli_argparse.h>
#include <bfutils/uCli/ucli_handler_macros.h>
#include <dvm/bf_drv_intf.h>
#include <string.h>

static bf_pltfm_cp2112_device_ctx_t
*si5342_i2c_hdl;
static int bf_pltfm_si5342_ppm =
    0; /* cached value */
bool si5342_base_cfg_done = false;

#define SI5342_CUST_REG_CONFIG_NUM_REGS 396

typedef struct {
    unsigned int
    address; /* 16-bit register address */
    unsigned char value;  /* 8-bit register data */

} si5342_register_op_t;

/* following register configurations have been generated by the tool
 * CBProSi534x8xFOTF v2.19.13 [2017-10-27]
 *
 * 322 means the clock of 322.265625 Mhz. (%2 on 25G serdes recovered clk)
 * 257 mean the clock of 257.8125 MHz. (%2 on 10G serdes recovered clk)
 * output0 and output1 clocks are both 156.25 Mhz for all the configurations.
 * Both output clocks are routed as Alternate Reference Clock input
 * to Tofino.
 *
 * All configurations share the common setting of Automatic and revertive
 * switchover and ZD mode is disabled. input0 clock has higher priority
 * over input1 clock.
 *
 * On Mavericks and Montara platforms, input0_clock is coming from clock
 * observation pad 0 while input1_clock is coming from clock observation
 * pad 1 of Tofino.
 */
/******************* NOTES **********************
 * from the tools that generated the base config for 322_322 setting *****
 *
 Overview
========
Part:         Si5342 Rev D
Project File: C:\Users\mimuegel.SILABS_AD\Desktop\P1-Project.slabtimeproj
Design ID:    <none>
Created By:   CBProSi534x8xFOTF v2.19.13 [2017-10-27]
Timestamp:    2017-10-27 09:59:31 GMT-05:00

Design Rule Check
=================
Errors:
- No errors

Warnings:
- No warnings

Device Grade
============
Maximum Output Frequency: 156.25 MHz
Frequency Synthesis Mode: Integer
Frequency Plan Grade:     D
Minimum Base OPN:         Si5342D*

Base       Output Clock         Supported Frequency Synthesis Modes
OPN Grade  Frequency Range      (Typical Jitter)
---------  -------------------  --------------------------------------------
Si5342A    100 Hz to 1.028 GHz  Integer (< 100 fs) and fractional (< 150 fs)
Si5342B    100 Hz to 350 MHz    "
Si5342C    100 Hz to 1.028 GHz  Integer only (< 100 fs)
Si5342D*   100 Hz to 350 MHz    "

* Based on your calculated frequency plan, a Si5342D grade device is
sufficient for your design. For more in-system configuration flexibility
(higher frequencies and/or to enable fractional synthesis), consider
selecting device grade Si5342A when specifying an ordering part number (OPN)
for your application. See the datasheet Ordering Guide for more information.

Design
======
Host Interface:
   I/O Power Supply: VDD (Core)
   SPI Mode: 4-Wire
   I2C Address Range: 104d to 107d / 0x68 to 0x6B (selected via A0/A1 pins)

XA/XB:
   48 MHz (XTAL - Crystal)

Inputs:
    IN0: 322.265625 MHz [ 322 + 17/64 MHz ]
         Standard
    IN1: 322.265625 MHz [ 322 + 17/64 MHz ]
         Standard
    IN2: Unused
    IN3: Unused

Outputs:
   OUT0: 156.25 MHz [ 156 + 1/4 MHz ]
         Enabled, LVDS 2.5 V
   OUT1: 156.25 MHz [ 156 + 1/4 MHz ]
         Enabled, LVDS 2.5 V

Frequency Plan
==============
Priority: maximize the number of low jitter outputs

Fvco = 13.75 GHz [ 13 + 3/4 GHz ]
Fpfd = 1.953125 MHz [ 1 + 61/64 MHz ]
Fms0 = 312.5 MHz [ 312 + 1/2 MHz ]

P dividers:
   P0  = 165
   P1  = 165
   P2  = Unused
   P3  = Unused
   Pxaxb = 1

MXAXB = 286.4583333333333333... [ 286 + 11/24 ]
M = 1408
N dividers:
   N0:
      Value: 44
      Skew:  0.000 s
      OUT0: 156.25 MHz [ 156 + 1/4 MHz ]
      OUT1: 156.25 MHz [ 156 + 1/4 MHz ]
   N1:
      Unused

R dividers:
   R0 = 2
   R1 = 2

Nominal Bandwidth:
  Desired: 100.000 Hz
  Actual:  84.096 Hz
  Coefficients:
     BW0:  19
     BW1:  34
     BW2:  12
     BW3:  11
     BW4:  7
     BW5:  63
Fastlock Bandwidth:
  Desired: 1.000 kHz
  Actual:  673.427 Hz
  Coefficients:
     BW0:  22
     BW1:  42
     BW2:  9
     BW3:  8
     BW4:  7
     BW5:  63
Holdover Bandwidth:
   N/A (Ramped Exit from Holdover)

Dividers listed above show effective values. These values are translated to
register settings by ClockBuilder Pro. For the actual register values, see
below. Refer to the Family Reference Manual for information on registers related
to frequency plan.

Digitally Controlled Oscillator (DCO)
=====================================
Mode: FINC/FDEC

N0: DCO Disabled

N1: DCO Disabled

Estimated Power & Junction Temperature
======================================
Assumptions:

Revision: D
VDD:      1.8 V
Ta:       70 ?C
Airflow:  None

Total Power: 623 mW, On Chip Power: 611 mW, Tj: 84 ?C

         Frequency  Format   Voltage   Current     Power
        ----------  ------  --------  --------  --------
VDD                            1.8 V   86.5 mA    156 mW
VDDA                           3.3 V  117.4 mA    387 mW
VDDO0   156.25 MHz  LVDS       2.5 V   15.9 mA     40 mW
VDDO1   156.25 MHz  LVDS       2.5 V   15.9 mA     40 mW
                                      --------  --------
                               Total  235.7 mA    623 mW

Note:

-Total power includes on- and off-chip power. This is a typical value and
estimate only.
-Use an EVB for a more exact power measurement
-On-chip power excludes power dissipated in external terminations.
-Tj is junction temperature. Tj must be less than 125 ?C (on Si5342 Revision D)
for device to comply with datasheet specifications.
******************************************************/

#define PREMABLE_CFG_CNT 3
static si5342_register_op_t const
si5342_322_322_cfg[] = {
    /* Start configuration preamble */
    {0x0B24, 0xC0},
    {0x0B25, 0x00},
    {0x0540, 0x01},
    /* End configuration preamble */
    /* Delay 300 msec */
    /* Start configuration registers */
    {0x0006, 0x00},
    {0x0007, 0x00},
    {0x0008, 0x00},
    {0x000B, 0x68},
    {0x0016, 0x02},
    {0x0017, 0xDC},
    {0x0018, 0xFC},
    {0x0019, 0xDD},
    {0x001A, 0xDF},
    {0x002B, 0x02},
    {0x002C, 0x03},
    {0x002D, 0x05},
    {0x002E, 0x38},
    {0x002F, 0x00},
    {0x0030, 0x38},
    {0x0031, 0x00},
    {0x0032, 0x00},
    {0x0033, 0x00},
    {0x0034, 0x00},
    {0x0035, 0x00},
    {0x0036, 0x35},
    {0x0037, 0x00},
    {0x0038, 0x35},
    {0x0039, 0x00},
    {0x003A, 0x00},
    {0x003B, 0x00},
    {0x003C, 0x00},
    {0x003D, 0x00},
    {0x003F, 0x00},
    {0x0040, 0x04},
    {0x0041, 0x0F},
    {0x0042, 0x0F},
    {0x0043, 0x00},
    {0x0044, 0x00},
    {0x0045, 0x0C},
    {0x0046, 0x32},
    {0x0047, 0x32},
    {0x0048, 0x00},
    {0x0049, 0x00},
    {0x004A, 0x32},
    {0x004B, 0x32},
    {0x004C, 0x00},
    {0x004D, 0x00},
    {0x004E, 0x55},
    {0x004F, 0x00},
    {0x0050, 0x0C},
    {0x0051, 0x03},
    {0x0052, 0x03},
    {0x0053, 0x00},
    {0x0054, 0x00},
    {0x0055, 0x03},
    {0x0056, 0x03},
    {0x0057, 0x00},
    {0x0058, 0x00},
    {0x0059, 0x05},
    {0x005A, 0xE3},
    {0x005B, 0xF8},
    {0x005C, 0xBE},
    {0x005D, 0x00},
    {0x005E, 0xE3},
    {0x005F, 0xF8},
    {0x0060, 0xBE},
    {0x0061, 0x00},
    {0x0062, 0x00},
    {0x0063, 0x00},
    {0x0064, 0x00},
    {0x0065, 0x00},
    {0x0066, 0x00},
    {0x0067, 0x00},
    {0x0068, 0x00},
    {0x0069, 0x00},
    {0x0092, 0x02},
    {0x0093, 0xA0},
    {0x0095, 0x00},
    {0x0096, 0x80},
    {0x0098, 0x60},
    {0x009A, 0x02},
    {0x009B, 0x40},
    {0x009D, 0x04},
    {0x009E, 0x40},
    {0x00A0, 0x20},
    {0x00A2, 0x00},
    {0x00A9, 0x9F},
    {0x00AA, 0x02},
    {0x00AB, 0x0C},
    {0x00AC, 0x00},
    {0x00E5, 0x21},
    {0x00EA, 0x55},
    {0x00EB, 0x01},
    {0x00EC, 0x0C},
    {0x00ED, 0x00},
    {0x0102, 0x01},
    {0x0112, 0x06},
    {0x0113, 0x09},
    {0x0114, 0x33},
    {0x0115, 0x08},
    {0x0117, 0x06},
    {0x0118, 0x09},
    {0x0119, 0x33},
    {0x011A, 0x08},
    {0x013F, 0x00},
    {0x0140, 0x00},
    {0x0141, 0x40},
    {0x0142, 0xFF},
    {0x0206, 0x00},
    {0x0208, 0xA5},
    {0x0209, 0x00},
    {0x020A, 0x00},
    {0x020B, 0x00},
    {0x020C, 0x00},
    {0x020D, 0x00},
    {0x020E, 0x01},
    {0x020F, 0x00},
    {0x0210, 0x00},
    {0x0211, 0x00},
    {0x0212, 0xA5},
    {0x0213, 0x00},
    {0x0214, 0x00},
    {0x0215, 0x00},
    {0x0216, 0x00},
    {0x0217, 0x00},
    {0x0218, 0x01},
    {0x0219, 0x00},
    {0x021A, 0x00},
    {0x021B, 0x00},
    {0x021C, 0x00},
    {0x021D, 0x00},
    {0x021E, 0x00},
    {0x021F, 0x00},
    {0x0220, 0x00},
    {0x0221, 0x00},
    {0x0222, 0x00},
    {0x0223, 0x00},
    {0x0224, 0x00},
    {0x0225, 0x00},
    {0x0226, 0x00},
    {0x0227, 0x00},
    {0x0228, 0x00},
    {0x0229, 0x00},
    {0x022A, 0x00},
    {0x022B, 0x00},
    {0x022C, 0x00},
    {0x022D, 0x00},
    {0x022E, 0x00},
    {0x022F, 0x00},
    {0x0231, 0x0B},
    {0x0232, 0x0B},
    {0x0233, 0x0B},
    {0x0234, 0x0B},
    {0x0235, 0x00},
    {0x0236, 0x00},
    {0x0237, 0x00},
    {0x0238, 0xF6},
    {0x0239, 0xD1},
    {0x023A, 0x00},
    {0x023B, 0x00},
    {0x023C, 0x00},
    {0x023D, 0x00},
    {0x023E, 0xD8},
    {0x0250, 0x00},
    {0x0251, 0x00},
    {0x0252, 0x00},
    {0x0253, 0x00},
    {0x0254, 0x00},
    {0x0255, 0x00},
    {0x026B, 0x53},
    {0x026C, 0x59},
    {0x026D, 0x4E},
    {0x026E, 0x43},
    {0x026F, 0x52},
    {0x0270, 0x45},
    {0x0271, 0x56},
    {0x0272, 0x31},
    {0x028A, 0x00},
    {0x028B, 0x00},
    {0x028C, 0x00},
    {0x028D, 0x00},
    {0x028E, 0x00},
    {0x028F, 0x00},
    {0x0290, 0x00},
    {0x0291, 0x00},
    {0x0294, 0x60},
    {0x0296, 0x00},
    {0x0297, 0x02},
    {0x0299, 0x02},
    {0x029D, 0xD7},
    {0x029E, 0x3B},
    {0x029F, 0x00},
    {0x02A9, 0x99},
    {0x02AA, 0x99},
    {0x02AB, 0x00},
    {0x02B7, 0xFF},
    {0x0302, 0x00},
    {0x0303, 0x00},
    {0x0304, 0x00},
    {0x0305, 0x80},
    {0x0306, 0x15},
    {0x0307, 0x00},
    {0x0308, 0x00},
    {0x0309, 0x00},
    {0x030A, 0x00},
    {0x030B, 0x80},
    {0x030C, 0x00},
    {0x030D, 0x00},
    {0x030E, 0x00},
    {0x030F, 0x00},
    {0x0310, 0x00},
    {0x0311, 0x00},
    {0x0312, 0x00},
    {0x0313, 0x00},
    {0x0314, 0x00},
    {0x0315, 0x00},
    {0x0316, 0x00},
    {0x0317, 0x00},
    {0x0338, 0x00},
    {0x0339, 0x1F},
    {0x033B, 0x00},
    {0x033C, 0x00},
    {0x033D, 0x00},
    {0x033E, 0x00},
    {0x033F, 0x00},
    {0x0340, 0x00},
    {0x0341, 0x00},
    {0x0342, 0x00},
    {0x0343, 0x00},
    {0x0344, 0x00},
    {0x0345, 0x00},
    {0x0346, 0x00},
    {0x0359, 0x00},
    {0x035A, 0x00},
    {0x035B, 0x00},
    {0x035C, 0x00},
    {0x0487, 0x00},
    {0x0508, 0x13},
    {0x0509, 0x22},
    {0x050A, 0x0C},
    {0x050B, 0x0B},
    {0x050C, 0x07},
    {0x050D, 0x3F},
    {0x050E, 0x16},
    {0x050F, 0x2A},
    {0x0510, 0x09},
    {0x0511, 0x08},
    {0x0512, 0x07},
    {0x0513, 0x3F},
    {0x0515, 0x00},
    {0x0516, 0x00},
    {0x0517, 0x00},
    {0x0518, 0x00},
    {0x0519, 0xB0},
    {0x051A, 0x02},
    {0x051B, 0x00},
    {0x051C, 0x00},
    {0x051D, 0x00},
    {0x051E, 0x00},
    {0x051F, 0x80},
    {0x0521, 0x2B},
    {0x052A, 0x00},
    {0x052B, 0x00},
    {0x052C, 0x0F},
    {0x052D, 0x03},
    {0x052E, 0x19},
    {0x052F, 0x19},
    {0x0531, 0x00},
    {0x0532, 0x56},
    {0x0533, 0x03},
    {0x0534, 0x00},
    {0x0535, 0x00},
    {0x0536, 0x06},
    {0x0537, 0x30},
    {0x0538, 0x21},
    {0x0539, 0x00},
    {0x053A, 0x02},
    {0x053B, 0x03},
    {0x053C, 0x00},
    {0x053D, 0x11},
    {0x053E, 0x06},
    {0x0589, 0x0D},
    {0x058A, 0x00},
    {0x059B, 0xF8},
    {0x059D, 0x13},
    {0x059E, 0x24},
    {0x059F, 0x0C},
    {0x05A0, 0x0B},
    {0x05A1, 0x07},
    {0x05A2, 0x3F},
    {0x05A6, 0x00},
    {0x0802, 0x35},
    {0x0803, 0x05},
    {0x0804, 0x00},
    {0x0805, 0x00},
    {0x0806, 0x00},
    {0x0807, 0x00},
    {0x0808, 0x00},
    {0x0809, 0x00},
    {0x080A, 0x00},
    {0x080B, 0x00},
    {0x080C, 0x00},
    {0x080D, 0x00},
    {0x080E, 0x00},
    {0x080F, 0x00},
    {0x0810, 0x00},
    {0x0811, 0x00},
    {0x0812, 0x00},
    {0x0813, 0x00},
    {0x0814, 0x00},
    {0x0815, 0x00},
    {0x0816, 0x00},
    {0x0817, 0x00},
    {0x0818, 0x00},
    {0x0819, 0x00},
    {0x081A, 0x00},
    {0x081B, 0x00},
    {0x081C, 0x00},
    {0x081D, 0x00},
    {0x081E, 0x00},
    {0x081F, 0x00},
    {0x0820, 0x00},
    {0x0821, 0x00},
    {0x0822, 0x00},
    {0x0823, 0x00},
    {0x0824, 0x00},
    {0x0825, 0x00},
    {0x0826, 0x00},
    {0x0827, 0x00},
    {0x0828, 0x00},
    {0x0829, 0x00},
    {0x082A, 0x00},
    {0x082B, 0x00},
    {0x082C, 0x00},
    {0x082D, 0x00},
    {0x082E, 0x00},
    {0x082F, 0x00},
    {0x0830, 0x00},
    {0x0831, 0x00},
    {0x0832, 0x00},
    {0x0833, 0x00},
    {0x0834, 0x00},
    {0x0835, 0x00},
    {0x0836, 0x00},
    {0x0837, 0x00},
    {0x0838, 0x00},
    {0x0839, 0x00},
    {0x083A, 0x00},
    {0x083B, 0x00},
    {0x083C, 0x00},
    {0x083D, 0x00},
    {0x083E, 0x00},
    {0x083F, 0x00},
    {0x0840, 0x00},
    {0x0841, 0x00},
    {0x0842, 0x00},
    {0x0843, 0x00},
    {0x0844, 0x00},
    {0x0845, 0x00},
    {0x0846, 0x00},
    {0x0847, 0x00},
    {0x0848, 0x00},
    {0x0849, 0x00},
    {0x084A, 0x00},
    {0x084B, 0x00},
    {0x084C, 0x00},
    {0x084D, 0x00},
    {0x084E, 0x00},
    {0x084F, 0x00},
    {0x0850, 0x00},
    {0x0851, 0x00},
    {0x0852, 0x00},
    {0x0853, 0x00},
    {0x0854, 0x00},
    {0x0855, 0x00},
    {0x0856, 0x00},
    {0x0857, 0x00},
    {0x0858, 0x00},
    {0x0859, 0x00},
    {0x085A, 0x00},
    {0x085B, 0x00},
    {0x085C, 0x00},
    {0x085D, 0x00},
    {0x085E, 0x00},
    {0x085F, 0x00},
    {0x0860, 0x00},
    {0x0861, 0x00},
    {0x090E, 0x02},
    {0x0943, 0x00},
    {0x0949, 0x03},
    {0x094A, 0x03},
    {0x094E, 0x49},
    {0x094F, 0x02},
    {0x095E, 0x00},
    {0x0A02, 0x00},
    {0x0A03, 0x01},
    {0x0A04, 0x01},
    {0x0A05, 0x01},
    {0x0A14, 0x00},
    {0x0A1A, 0x00},
    {0x0B44, 0x2F},
    {0x0B46, 0x00},
    {0x0B47, 0x0C},
    {0x0B48, 0x0C},
    {0x0B4A, 0x02},
    {0x0B57, 0xF0},
    {0x0B58, 0x00},
    /* End configuration registers */

    /* Start configuration postamble */
    {0x0514, 0x01},
    {0x001C, 0x01},
    {0x0540, 0x00},
    {0x0B24, 0xC3},
    {0x0B25, 0x02},
    /* End configuration postamble */
};

static si5342_register_op_t const
si5342_322_257_cfg[] = {
    /* Start configuration preamble */
    {0x0B24, 0xC0},
    {0x0B25, 0x00},
    {0x0540, 0x01},
    /* End configuration preamble */
    /* Delay 300 msec */
    /* Start configuration registers */
    {0x0006, 0x00},
    {0x0007, 0x00},
    {0x0008, 0x00},
    {0x000B, 0x68},
    {0x0016, 0x02},
    {0x0017, 0xDC},
    {0x0018, 0xFC},
    {0x0019, 0xDD},
    {0x001A, 0xDF},
    {0x002B, 0x02},
    {0x002C, 0x03},
    {0x002D, 0x05},
    {0x002E, 0x38},
    {0x002F, 0x00},
    {0x0030, 0x38},
    {0x0031, 0x00},
    {0x0032, 0x00},
    {0x0033, 0x00},
    {0x0034, 0x00},
    {0x0035, 0x00},
    {0x0036, 0x35},
    {0x0037, 0x00},
    {0x0038, 0x35},
    {0x0039, 0x00},
    {0x003A, 0x00},
    {0x003B, 0x00},
    {0x003C, 0x00},
    {0x003D, 0x00},
    {0x003F, 0x00},
    {0x0040, 0x04},
    {0x0041, 0x0F},
    {0x0042, 0x0E},
    {0x0043, 0x00},
    {0x0044, 0x00},
    {0x0045, 0x0C},
    {0x0046, 0x32},
    {0x0047, 0x32},
    {0x0048, 0x00},
    {0x0049, 0x00},
    {0x004A, 0x32},
    {0x004B, 0x32},
    {0x004C, 0x00},
    {0x004D, 0x00},
    {0x004E, 0x55},
    {0x004F, 0x00},
    {0x0050, 0x0C},
    {0x0051, 0x03},
    {0x0052, 0x03},
    {0x0053, 0x00},
    {0x0054, 0x00},
    {0x0055, 0x03},
    {0x0056, 0x03},
    {0x0057, 0x00},
    {0x0058, 0x00},
    {0x0059, 0x05},
    {0x005A, 0xE3},
    {0x005B, 0xF8},
    {0x005C, 0xBE},
    {0x005D, 0x00},
    {0x005E, 0x38},
    {0x005F, 0x8E},
    {0x0060, 0x31},
    {0x0061, 0x01},
    {0x0062, 0x00},
    {0x0063, 0x00},
    {0x0064, 0x00},
    {0x0065, 0x00},
    {0x0066, 0x00},
    {0x0067, 0x00},
    {0x0068, 0x00},
    {0x0069, 0x00},
    {0x0092, 0x02},
    {0x0093, 0xA0},
    {0x0095, 0x00},
    {0x0096, 0x80},
    {0x0098, 0x60},
    {0x009A, 0x02},
    {0x009B, 0x40},
    {0x009D, 0x04},
    {0x009E, 0x40},
    {0x00A0, 0x20},
    {0x00A2, 0x00},
    {0x00A9, 0x9F},
    {0x00AA, 0x02},
    {0x00AB, 0x0C},
    {0x00AC, 0x00},
    {0x00E5, 0x21},
    {0x00EA, 0x55},
    {0x00EB, 0x01},
    {0x00EC, 0x0C},
    {0x00ED, 0x00},
    {0x0102, 0x01},
    {0x0112, 0x06},
    {0x0113, 0x09},
    {0x0114, 0x33},
    {0x0115, 0x08},
    {0x0117, 0x06},
    {0x0118, 0x09},
    {0x0119, 0x33},
    {0x011A, 0x08},
    {0x013F, 0x00},
    {0x0140, 0x00},
    {0x0141, 0x40},
    {0x0142, 0xFF},
    {0x0206, 0x00},
    {0x0208, 0xA5},
    {0x0209, 0x00},
    {0x020A, 0x00},
    {0x020B, 0x00},
    {0x020C, 0x00},
    {0x020D, 0x00},
    {0x020E, 0x01},
    {0x020F, 0x00},
    {0x0210, 0x00},
    {0x0211, 0x00},
    {0x0212, 0x84},
    {0x0213, 0x00},
    {0x0214, 0x00},
    {0x0215, 0x00},
    {0x0216, 0x00},
    {0x0217, 0x00},
    {0x0218, 0x01},
    {0x0219, 0x00},
    {0x021A, 0x00},
    {0x021B, 0x00},
    {0x021C, 0x00},
    {0x021D, 0x00},
    {0x021E, 0x00},
    {0x021F, 0x00},
    {0x0220, 0x00},
    {0x0221, 0x00},
    {0x0222, 0x00},
    {0x0223, 0x00},
    {0x0224, 0x00},
    {0x0225, 0x00},
    {0x0226, 0x00},
    {0x0227, 0x00},
    {0x0228, 0x00},
    {0x0229, 0x00},
    {0x022A, 0x00},
    {0x022B, 0x00},
    {0x022C, 0x00},
    {0x022D, 0x00},
    {0x022E, 0x00},
    {0x022F, 0x00},
    {0x0231, 0x0B},
    {0x0232, 0x0B},
    {0x0233, 0x0B},
    {0x0234, 0x0B},
    {0x0235, 0x00},
    {0x0236, 0x00},
    {0x0237, 0x00},
    {0x0238, 0xF6},
    {0x0239, 0xD1},
    {0x023A, 0x00},
    {0x023B, 0x00},
    {0x023C, 0x00},
    {0x023D, 0x00},
    {0x023E, 0xD8},
    {0x0250, 0x00},
    {0x0251, 0x00},
    {0x0252, 0x00},
    {0x0253, 0x00},
    {0x0254, 0x00},
    {0x0255, 0x00},
    {0x026B, 0x53},
    {0x026C, 0x59},
    {0x026D, 0x4E},
    {0x026E, 0x43},
    {0x026F, 0x52},
    {0x0270, 0x45},
    {0x0271, 0x56},
    {0x0272, 0x32},
    {0x028A, 0x00},
    {0x028B, 0x00},
    {0x028C, 0x00},
    {0x028D, 0x00},
    {0x028E, 0x00},
    {0x028F, 0x00},
    {0x0290, 0x00},
    {0x0291, 0x00},
    {0x0294, 0x60},
    {0x0296, 0x00},
    {0x0297, 0x02},
    {0x0299, 0x02},
    {0x029D, 0xD7},
    {0x029E, 0x3B},
    {0x029F, 0x00},
    {0x02A9, 0x99},
    {0x02AA, 0x99},
    {0x02AB, 0x00},
    {0x02B7, 0xFF},
    {0x0302, 0x00},
    {0x0303, 0x00},
    {0x0304, 0x00},
    {0x0305, 0x80},
    {0x0306, 0x15},
    {0x0307, 0x00},
    {0x0308, 0x00},
    {0x0309, 0x00},
    {0x030A, 0x00},
    {0x030B, 0x80},
    {0x030C, 0x00},
    {0x030D, 0x00},
    {0x030E, 0x00},
    {0x030F, 0x00},
    {0x0310, 0x00},
    {0x0311, 0x00},
    {0x0312, 0x00},
    {0x0313, 0x00},
    {0x0314, 0x00},
    {0x0315, 0x00},
    {0x0316, 0x00},
    {0x0317, 0x00},
    {0x0338, 0x00},
    {0x0339, 0x1F},
    {0x033B, 0x00},
    {0x033C, 0x00},
    {0x033D, 0x00},
    {0x033E, 0x00},
    {0x033F, 0x00},
    {0x0340, 0x00},
    {0x0341, 0x00},
    {0x0342, 0x00},
    {0x0343, 0x00},
    {0x0344, 0x00},
    {0x0345, 0x00},
    {0x0346, 0x00},
    {0x0359, 0x00},
    {0x035A, 0x00},
    {0x035B, 0x00},
    {0x035C, 0x00},
    {0x0487, 0x00},
    {0x0508, 0x13},
    {0x0509, 0x22},
    {0x050A, 0x0C},
    {0x050B, 0x0B},
    {0x050C, 0x07},
    {0x050D, 0x3F},
    {0x050E, 0x16},
    {0x050F, 0x2A},
    {0x0510, 0x09},
    {0x0511, 0x08},
    {0x0512, 0x07},
    {0x0513, 0x3F},
    {0x0515, 0x00},
    {0x0516, 0x00},
    {0x0517, 0x00},
    {0x0518, 0x00},
    {0x0519, 0xB0},
    {0x051A, 0x02},
    {0x051B, 0x00},
    {0x051C, 0x00},
    {0x051D, 0x00},
    {0x051E, 0x00},
    {0x051F, 0x80},
    {0x0521, 0x2B},
    {0x052A, 0x00},
    {0x052B, 0x00},
    {0x052C, 0x0F},
    {0x052D, 0x03},
    {0x052E, 0x19},
    {0x052F, 0x19},
    {0x0531, 0x00},
    {0x0532, 0x56},
    {0x0533, 0x03},
    {0x0534, 0x00},
    {0x0535, 0x00},
    {0x0536, 0x06},
    {0x0537, 0x30},
    {0x0538, 0x21},
    {0x0539, 0x00},
    {0x053A, 0x02},
    {0x053B, 0x03},
    {0x053C, 0x00},
    {0x053D, 0x11},
    {0x053E, 0x06},
    {0x0589, 0x0D},
    {0x058A, 0x00},
    {0x059B, 0xF8},
    {0x059D, 0x13},
    {0x059E, 0x24},
    {0x059F, 0x0C},
    {0x05A0, 0x0B},
    {0x05A1, 0x07},
    {0x05A2, 0x3F},
    {0x05A6, 0x00},
    {0x0802, 0x35},
    {0x0803, 0x05},
    {0x0804, 0x00},
    {0x0805, 0x00},
    {0x0806, 0x00},
    {0x0807, 0x00},
    {0x0808, 0x00},
    {0x0809, 0x00},
    {0x080A, 0x00},
    {0x080B, 0x00},
    {0x080C, 0x00},
    {0x080D, 0x00},
    {0x080E, 0x00},
    {0x080F, 0x00},
    {0x0810, 0x00},
    {0x0811, 0x00},
    {0x0812, 0x00},
    {0x0813, 0x00},
    {0x0814, 0x00},
    {0x0815, 0x00},
    {0x0816, 0x00},
    {0x0817, 0x00},
    {0x0818, 0x00},
    {0x0819, 0x00},
    {0x081A, 0x00},
    {0x081B, 0x00},
    {0x081C, 0x00},
    {0x081D, 0x00},
    {0x081E, 0x00},
    {0x081F, 0x00},
    {0x0820, 0x00},
    {0x0821, 0x00},
    {0x0822, 0x00},
    {0x0823, 0x00},
    {0x0824, 0x00},
    {0x0825, 0x00},
    {0x0826, 0x00},
    {0x0827, 0x00},
    {0x0828, 0x00},
    {0x0829, 0x00},
    {0x082A, 0x00},
    {0x082B, 0x00},
    {0x082C, 0x00},
    {0x082D, 0x00},
    {0x082E, 0x00},
    {0x082F, 0x00},
    {0x0830, 0x00},
    {0x0831, 0x00},
    {0x0832, 0x00},
    {0x0833, 0x00},
    {0x0834, 0x00},
    {0x0835, 0x00},
    {0x0836, 0x00},
    {0x0837, 0x00},
    {0x0838, 0x00},
    {0x0839, 0x00},
    {0x083A, 0x00},
    {0x083B, 0x00},
    {0x083C, 0x00},
    {0x083D, 0x00},
    {0x083E, 0x00},
    {0x083F, 0x00},
    {0x0840, 0x00},
    {0x0841, 0x00},
    {0x0842, 0x00},
    {0x0843, 0x00},
    {0x0844, 0x00},
    {0x0845, 0x00},
    {0x0846, 0x00},
    {0x0847, 0x00},
    {0x0848, 0x00},
    {0x0849, 0x00},
    {0x084A, 0x00},
    {0x084B, 0x00},
    {0x084C, 0x00},
    {0x084D, 0x00},
    {0x084E, 0x00},
    {0x084F, 0x00},
    {0x0850, 0x00},
    {0x0851, 0x00},
    {0x0852, 0x00},
    {0x0853, 0x00},
    {0x0854, 0x00},
    {0x0855, 0x00},
    {0x0856, 0x00},
    {0x0857, 0x00},
    {0x0858, 0x00},
    {0x0859, 0x00},
    {0x085A, 0x00},
    {0x085B, 0x00},
    {0x085C, 0x00},
    {0x085D, 0x00},
    {0x085E, 0x00},
    {0x085F, 0x00},
    {0x0860, 0x00},
    {0x0861, 0x00},
    {0x090E, 0x02},
    {0x0943, 0x00},
    {0x0949, 0x03},
    {0x094A, 0x03},
    {0x094E, 0x49},
    {0x094F, 0x02},
    {0x095E, 0x00},
    {0x0A02, 0x00},
    {0x0A03, 0x01},
    {0x0A04, 0x01},
    {0x0A05, 0x01},
    {0x0A14, 0x00},
    {0x0A1A, 0x00},
    {0x0B44, 0x2F},
    {0x0B46, 0x00},
    {0x0B47, 0x0C},
    {0x0B48, 0x0C},
    {0x0B4A, 0x02},
    {0x0B57, 0xF0},
    {0x0B58, 0x00},
    /* End configuration registers */

    /* Start configuration postamble */
    {0x0514, 0x01},
    {0x001C, 0x01},
    {0x0540, 0x00},
    {0x0B24, 0xC3},
    {0x0B25, 0x02},
    /* End configuration postamble */
};

static si5342_register_op_t const
si5342_257_322_cfg[] = {
    /* Start configuration preamble */
    {0x0B24, 0xC0},
    {0x0B25, 0x00},
    {0x0540, 0x01},
    /* End configuration preamble */
    /* Delay 300 msec */
    /* Start configuration registers */
    {0x0006, 0x00},
    {0x0007, 0x00},
    {0x0008, 0x00},
    {0x000B, 0x68},
    {0x0016, 0x02},
    {0x0017, 0xDC},
    {0x0018, 0xFC},
    {0x0019, 0xDD},
    {0x001A, 0xDF},
    {0x002B, 0x02},
    {0x002C, 0x03},
    {0x002D, 0x05},
    {0x002E, 0x38},
    {0x002F, 0x00},
    {0x0030, 0x38},
    {0x0031, 0x00},
    {0x0032, 0x00},
    {0x0033, 0x00},
    {0x0034, 0x00},
    {0x0035, 0x00},
    {0x0036, 0x35},
    {0x0037, 0x00},
    {0x0038, 0x35},
    {0x0039, 0x00},
    {0x003A, 0x00},
    {0x003B, 0x00},
    {0x003C, 0x00},
    {0x003D, 0x00},
    {0x003F, 0x00},
    {0x0040, 0x04},
    {0x0041, 0x0E},
    {0x0042, 0x0F},
    {0x0043, 0x00},
    {0x0044, 0x00},
    {0x0045, 0x0C},
    {0x0046, 0x32},
    {0x0047, 0x32},
    {0x0048, 0x00},
    {0x0049, 0x00},
    {0x004A, 0x32},
    {0x004B, 0x32},
    {0x004C, 0x00},
    {0x004D, 0x00},
    {0x004E, 0x55},
    {0x004F, 0x00},
    {0x0050, 0x0C},
    {0x0051, 0x03},
    {0x0052, 0x03},
    {0x0053, 0x00},
    {0x0054, 0x00},
    {0x0055, 0x03},
    {0x0056, 0x03},
    {0x0057, 0x00},
    {0x0058, 0x00},
    {0x0059, 0x05},
    {0x005A, 0x38},
    {0x005B, 0x8E},
    {0x005C, 0x31},
    {0x005D, 0x01},
    {0x005E, 0xE3},
    {0x005F, 0xF8},
    {0x0060, 0xBE},
    {0x0061, 0x00},
    {0x0062, 0x00},
    {0x0063, 0x00},
    {0x0064, 0x00},
    {0x0065, 0x00},
    {0x0066, 0x00},
    {0x0067, 0x00},
    {0x0068, 0x00},
    {0x0069, 0x00},
    {0x0092, 0x02},
    {0x0093, 0xA0},
    {0x0095, 0x00},
    {0x0096, 0x80},
    {0x0098, 0x60},
    {0x009A, 0x02},
    {0x009B, 0x40},
    {0x009D, 0x04},
    {0x009E, 0x40},
    {0x00A0, 0x20},
    {0x00A2, 0x00},
    {0x00A9, 0x9F},
    {0x00AA, 0x02},
    {0x00AB, 0x0C},
    {0x00AC, 0x00},
    {0x00E5, 0x21},
    {0x00EA, 0x55},
    {0x00EB, 0x01},
    {0x00EC, 0x0C},
    {0x00ED, 0x00},
    {0x0102, 0x01},
    {0x0112, 0x06},
    {0x0113, 0x09},
    {0x0114, 0x33},
    {0x0115, 0x08},
    {0x0117, 0x06},
    {0x0118, 0x09},
    {0x0119, 0x33},
    {0x011A, 0x08},
    {0x013F, 0x00},
    {0x0140, 0x00},
    {0x0141, 0x40},
    {0x0142, 0xFF},
    {0x0206, 0x00},
    {0x0208, 0x84},
    {0x0209, 0x00},
    {0x020A, 0x00},
    {0x020B, 0x00},
    {0x020C, 0x00},
    {0x020D, 0x00},
    {0x020E, 0x01},
    {0x020F, 0x00},
    {0x0210, 0x00},
    {0x0211, 0x00},
    {0x0212, 0xA5},
    {0x0213, 0x00},
    {0x0214, 0x00},
    {0x0215, 0x00},
    {0x0216, 0x00},
    {0x0217, 0x00},
    {0x0218, 0x01},
    {0x0219, 0x00},
    {0x021A, 0x00},
    {0x021B, 0x00},
    {0x021C, 0x00},
    {0x021D, 0x00},
    {0x021E, 0x00},
    {0x021F, 0x00},
    {0x0220, 0x00},
    {0x0221, 0x00},
    {0x0222, 0x00},
    {0x0223, 0x00},
    {0x0224, 0x00},
    {0x0225, 0x00},
    {0x0226, 0x00},
    {0x0227, 0x00},
    {0x0228, 0x00},
    {0x0229, 0x00},
    {0x022A, 0x00},
    {0x022B, 0x00},
    {0x022C, 0x00},
    {0x022D, 0x00},
    {0x022E, 0x00},
    {0x022F, 0x00},
    {0x0231, 0x0B},
    {0x0232, 0x0B},
    {0x0233, 0x0B},
    {0x0234, 0x0B},
    {0x0235, 0x00},
    {0x0236, 0x00},
    {0x0237, 0x00},
    {0x0238, 0xF6},
    {0x0239, 0xD1},
    {0x023A, 0x00},
    {0x023B, 0x00},
    {0x023C, 0x00},
    {0x023D, 0x00},
    {0x023E, 0xD8},
    {0x0250, 0x00},
    {0x0251, 0x00},
    {0x0252, 0x00},
    {0x0253, 0x00},
    {0x0254, 0x00},
    {0x0255, 0x00},
    {0x026B, 0x53},
    {0x026C, 0x59},
    {0x026D, 0x4E},
    {0x026E, 0x43},
    {0x026F, 0x52},
    {0x0270, 0x45},
    {0x0271, 0x56},
    {0x0272, 0x32},
    {0x028A, 0x00},
    {0x028B, 0x00},
    {0x028C, 0x00},
    {0x028D, 0x00},
    {0x028E, 0x00},
    {0x028F, 0x00},
    {0x0290, 0x00},
    {0x0291, 0x00},
    {0x0294, 0x60},
    {0x0296, 0x00},
    {0x0297, 0x02},
    {0x0299, 0x02},
    {0x029D, 0xD7},
    {0x029E, 0x3B},
    {0x029F, 0x00},
    {0x02A9, 0x99},
    {0x02AA, 0x99},
    {0x02AB, 0x00},
    {0x02B7, 0xFF},
    {0x0302, 0x00},
    {0x0303, 0x00},
    {0x0304, 0x00},
    {0x0305, 0x80},
    {0x0306, 0x15},
    {0x0307, 0x00},
    {0x0308, 0x00},
    {0x0309, 0x00},
    {0x030A, 0x00},
    {0x030B, 0x80},
    {0x030C, 0x00},
    {0x030D, 0x00},
    {0x030E, 0x00},
    {0x030F, 0x00},
    {0x0310, 0x00},
    {0x0311, 0x00},
    {0x0312, 0x00},
    {0x0313, 0x00},
    {0x0314, 0x00},
    {0x0315, 0x00},
    {0x0316, 0x00},
    {0x0317, 0x00},
    {0x0338, 0x00},
    {0x0339, 0x1F},
    {0x033B, 0x00},
    {0x033C, 0x00},
    {0x033D, 0x00},
    {0x033E, 0x00},
    {0x033F, 0x00},
    {0x0340, 0x00},
    {0x0341, 0x00},
    {0x0342, 0x00},
    {0x0343, 0x00},
    {0x0344, 0x00},
    {0x0345, 0x00},
    {0x0346, 0x00},
    {0x0359, 0x00},
    {0x035A, 0x00},
    {0x035B, 0x00},
    {0x035C, 0x00},
    {0x0487, 0x00},
    {0x0508, 0x13},
    {0x0509, 0x22},
    {0x050A, 0x0C},
    {0x050B, 0x0B},
    {0x050C, 0x07},
    {0x050D, 0x3F},
    {0x050E, 0x16},
    {0x050F, 0x2A},
    {0x0510, 0x09},
    {0x0511, 0x08},
    {0x0512, 0x07},
    {0x0513, 0x3F},
    {0x0515, 0x00},
    {0x0516, 0x00},
    {0x0517, 0x00},
    {0x0518, 0x00},
    {0x0519, 0xB0},
    {0x051A, 0x02},
    {0x051B, 0x00},
    {0x051C, 0x00},
    {0x051D, 0x00},
    {0x051E, 0x00},
    {0x051F, 0x80},
    {0x0521, 0x2B},
    {0x052A, 0x00},
    {0x052B, 0x00},
    {0x052C, 0x0F},
    {0x052D, 0x03},
    {0x052E, 0x19},
    {0x052F, 0x19},
    {0x0531, 0x00},
    {0x0532, 0x56},
    {0x0533, 0x03},
    {0x0534, 0x00},
    {0x0535, 0x00},
    {0x0536, 0x06},
    {0x0537, 0x30},
    {0x0538, 0x21},
    {0x0539, 0x00},
    {0x053A, 0x02},
    {0x053B, 0x03},
    {0x053C, 0x00},
    {0x053D, 0x11},
    {0x053E, 0x06},
    {0x0589, 0x0D},
    {0x058A, 0x00},
    {0x059B, 0xF8},
    {0x059D, 0x13},
    {0x059E, 0x24},
    {0x059F, 0x0C},
    {0x05A0, 0x0B},
    {0x05A1, 0x07},
    {0x05A2, 0x3F},
    {0x05A6, 0x00},
    {0x0802, 0x35},
    {0x0803, 0x05},
    {0x0804, 0x00},
    {0x0805, 0x00},
    {0x0806, 0x00},
    {0x0807, 0x00},
    {0x0808, 0x00},
    {0x0809, 0x00},
    {0x080A, 0x00},
    {0x080B, 0x00},
    {0x080C, 0x00},
    {0x080D, 0x00},
    {0x080E, 0x00},
    {0x080F, 0x00},
    {0x0810, 0x00},
    {0x0811, 0x00},
    {0x0812, 0x00},
    {0x0813, 0x00},
    {0x0814, 0x00},
    {0x0815, 0x00},
    {0x0816, 0x00},
    {0x0817, 0x00},
    {0x0818, 0x00},
    {0x0819, 0x00},
    {0x081A, 0x00},
    {0x081B, 0x00},
    {0x081C, 0x00},
    {0x081D, 0x00},
    {0x081E, 0x00},
    {0x081F, 0x00},
    {0x0820, 0x00},
    {0x0821, 0x00},
    {0x0822, 0x00},
    {0x0823, 0x00},
    {0x0824, 0x00},
    {0x0825, 0x00},
    {0x0826, 0x00},
    {0x0827, 0x00},
    {0x0828, 0x00},
    {0x0829, 0x00},
    {0x082A, 0x00},
    {0x082B, 0x00},
    {0x082C, 0x00},
    {0x082D, 0x00},
    {0x082E, 0x00},
    {0x082F, 0x00},
    {0x0830, 0x00},
    {0x0831, 0x00},
    {0x0832, 0x00},
    {0x0833, 0x00},
    {0x0834, 0x00},
    {0x0835, 0x00},
    {0x0836, 0x00},
    {0x0837, 0x00},
    {0x0838, 0x00},
    {0x0839, 0x00},
    {0x083A, 0x00},
    {0x083B, 0x00},
    {0x083C, 0x00},
    {0x083D, 0x00},
    {0x083E, 0x00},
    {0x083F, 0x00},
    {0x0840, 0x00},
    {0x0841, 0x00},
    {0x0842, 0x00},
    {0x0843, 0x00},
    {0x0844, 0x00},
    {0x0845, 0x00},
    {0x0846, 0x00},
    {0x0847, 0x00},
    {0x0848, 0x00},
    {0x0849, 0x00},
    {0x084A, 0x00},
    {0x084B, 0x00},
    {0x084C, 0x00},
    {0x084D, 0x00},
    {0x084E, 0x00},
    {0x084F, 0x00},
    {0x0850, 0x00},
    {0x0851, 0x00},
    {0x0852, 0x00},
    {0x0853, 0x00},
    {0x0854, 0x00},
    {0x0855, 0x00},
    {0x0856, 0x00},
    {0x0857, 0x00},
    {0x0858, 0x00},
    {0x0859, 0x00},
    {0x085A, 0x00},
    {0x085B, 0x00},
    {0x085C, 0x00},
    {0x085D, 0x00},
    {0x085E, 0x00},
    {0x085F, 0x00},
    {0x0860, 0x00},
    {0x0861, 0x00},
    {0x090E, 0x02},
    {0x0943, 0x00},
    {0x0949, 0x03},
    {0x094A, 0x03},
    {0x094E, 0x49},
    {0x094F, 0x02},
    {0x095E, 0x00},
    {0x0A02, 0x00},
    {0x0A03, 0x01},
    {0x0A04, 0x01},
    {0x0A05, 0x01},
    {0x0A14, 0x00},
    {0x0A1A, 0x00},
    {0x0B44, 0x2F},
    {0x0B46, 0x00},
    {0x0B47, 0x0C},
    {0x0B48, 0x0C},
    {0x0B4A, 0x02},
    {0x0B57, 0xF0},
    {0x0B58, 0x00},
    /* End configuration registers */

    /* Start configuration postamble */
    {0x0514, 0x01},
    {0x001C, 0x01},
    {0x0540, 0x00},
    {0x0B24, 0xC3},
    {0x0B25, 0x02},
    /* End configuration postamble */
};

static si5342_register_op_t const
si5342_257_257_cfg[] = {
    /* Start configuration preamble */
    {0x0B24, 0xC0},
    {0x0B25, 0x00},
    {0x0540, 0x01},
    /* End configuration preamble */
    /* Delay 300 msec */
    /* Start configuration registers */
    {0x0006, 0x00},
    {0x0007, 0x00},
    {0x0008, 0x00},
    {0x000B, 0x68},
    {0x0016, 0x02},
    {0x0017, 0xDC},
    {0x0018, 0xFC},
    {0x0019, 0xDD},
    {0x001A, 0xDF},
    {0x002B, 0x02},
    {0x002C, 0x03},
    {0x002D, 0x05},
    {0x002E, 0x38},
    {0x002F, 0x00},
    {0x0030, 0x38},
    {0x0031, 0x00},
    {0x0032, 0x00},
    {0x0033, 0x00},
    {0x0034, 0x00},
    {0x0035, 0x00},
    {0x0036, 0x35},
    {0x0037, 0x00},
    {0x0038, 0x35},
    {0x0039, 0x00},
    {0x003A, 0x00},
    {0x003B, 0x00},
    {0x003C, 0x00},
    {0x003D, 0x00},
    {0x003F, 0x00},
    {0x0040, 0x04},
    {0x0041, 0x0E},
    {0x0042, 0x0E},
    {0x0043, 0x00},
    {0x0044, 0x00},
    {0x0045, 0x0C},
    {0x0046, 0x32},
    {0x0047, 0x32},
    {0x0048, 0x00},
    {0x0049, 0x00},
    {0x004A, 0x32},
    {0x004B, 0x32},
    {0x004C, 0x00},
    {0x004D, 0x00},
    {0x004E, 0x55},
    {0x004F, 0x00},
    {0x0050, 0x0C},
    {0x0051, 0x03},
    {0x0052, 0x03},
    {0x0053, 0x00},
    {0x0054, 0x00},
    {0x0055, 0x03},
    {0x0056, 0x03},
    {0x0057, 0x00},
    {0x0058, 0x00},
    {0x0059, 0x05},
    {0x005A, 0x38},
    {0x005B, 0x8E},
    {0x005C, 0x31},
    {0x005D, 0x01},
    {0x005E, 0x38},
    {0x005F, 0x8E},
    {0x0060, 0x31},
    {0x0061, 0x01},
    {0x0062, 0x00},
    {0x0063, 0x00},
    {0x0064, 0x00},
    {0x0065, 0x00},
    {0x0066, 0x00},
    {0x0067, 0x00},
    {0x0068, 0x00},
    {0x0069, 0x00},
    {0x0092, 0x02},
    {0x0093, 0xA0},
    {0x0095, 0x00},
    {0x0096, 0x80},
    {0x0098, 0x60},
    {0x009A, 0x02},
    {0x009B, 0x40},
    {0x009D, 0x04},
    {0x009E, 0x40},
    {0x00A0, 0x20},
    {0x00A2, 0x00},
    {0x00A9, 0x9F},
    {0x00AA, 0x02},
    {0x00AB, 0x0C},
    {0x00AC, 0x00},
    {0x00E5, 0x21},
    {0x00EA, 0x55},
    {0x00EB, 0x01},
    {0x00EC, 0x0C},
    {0x00ED, 0x00},
    {0x0102, 0x01},
    {0x0112, 0x06},
    {0x0113, 0x09},
    {0x0114, 0x33},
    {0x0115, 0x08},
    {0x0117, 0x06},
    {0x0118, 0x09},
    {0x0119, 0x33},
    {0x011A, 0x08},
    {0x013F, 0x00},
    {0x0140, 0x00},
    {0x0141, 0x40},
    {0x0142, 0xFF},
    {0x0206, 0x00},
    {0x0208, 0x84},
    {0x0209, 0x00},
    {0x020A, 0x00},
    {0x020B, 0x00},
    {0x020C, 0x00},
    {0x020D, 0x00},
    {0x020E, 0x01},
    {0x020F, 0x00},
    {0x0210, 0x00},
    {0x0211, 0x00},
    {0x0212, 0x84},
    {0x0213, 0x00},
    {0x0214, 0x00},
    {0x0215, 0x00},
    {0x0216, 0x00},
    {0x0217, 0x00},
    {0x0218, 0x01},
    {0x0219, 0x00},
    {0x021A, 0x00},
    {0x021B, 0x00},
    {0x021C, 0x00},
    {0x021D, 0x00},
    {0x021E, 0x00},
    {0x021F, 0x00},
    {0x0220, 0x00},
    {0x0221, 0x00},
    {0x0222, 0x00},
    {0x0223, 0x00},
    {0x0224, 0x00},
    {0x0225, 0x00},
    {0x0226, 0x00},
    {0x0227, 0x00},
    {0x0228, 0x00},
    {0x0229, 0x00},
    {0x022A, 0x00},
    {0x022B, 0x00},
    {0x022C, 0x00},
    {0x022D, 0x00},
    {0x022E, 0x00},
    {0x022F, 0x00},
    {0x0231, 0x0B},
    {0x0232, 0x0B},
    {0x0233, 0x0B},
    {0x0234, 0x0B},
    {0x0235, 0x00},
    {0x0236, 0x00},
    {0x0237, 0x00},
    {0x0238, 0xF6},
    {0x0239, 0xD1},
    {0x023A, 0x00},
    {0x023B, 0x00},
    {0x023C, 0x00},
    {0x023D, 0x00},
    {0x023E, 0xD8},
    {0x0250, 0x00},
    {0x0251, 0x00},
    {0x0252, 0x00},
    {0x0253, 0x00},
    {0x0254, 0x00},
    {0x0255, 0x00},
    {0x026B, 0x53},
    {0x026C, 0x59},
    {0x026D, 0x4E},
    {0x026E, 0x43},
    {0x026F, 0x52},
    {0x0270, 0x45},
    {0x0271, 0x56},
    {0x0272, 0x32},
    {0x028A, 0x00},
    {0x028B, 0x00},
    {0x028C, 0x00},
    {0x028D, 0x00},
    {0x028E, 0x00},
    {0x028F, 0x00},
    {0x0290, 0x00},
    {0x0291, 0x00},
    {0x0294, 0x60},
    {0x0296, 0x00},
    {0x0297, 0x02},
    {0x0299, 0x02},
    {0x029D, 0xD7},
    {0x029E, 0x3B},
    {0x029F, 0x00},
    {0x02A9, 0x99},
    {0x02AA, 0x99},
    {0x02AB, 0x00},
    {0x02B7, 0xFF},
    {0x0302, 0x00},
    {0x0303, 0x00},
    {0x0304, 0x00},
    {0x0305, 0x80},
    {0x0306, 0x15},
    {0x0307, 0x00},
    {0x0308, 0x00},
    {0x0309, 0x00},
    {0x030A, 0x00},
    {0x030B, 0x80},
    {0x030C, 0x00},
    {0x030D, 0x00},
    {0x030E, 0x00},
    {0x030F, 0x00},
    {0x0310, 0x00},
    {0x0311, 0x00},
    {0x0312, 0x00},
    {0x0313, 0x00},
    {0x0314, 0x00},
    {0x0315, 0x00},
    {0x0316, 0x00},
    {0x0317, 0x00},
    {0x0338, 0x00},
    {0x0339, 0x1F},
    {0x033B, 0x00},
    {0x033C, 0x00},
    {0x033D, 0x00},
    {0x033E, 0x00},
    {0x033F, 0x00},
    {0x0340, 0x00},
    {0x0341, 0x00},
    {0x0342, 0x00},
    {0x0343, 0x00},
    {0x0344, 0x00},
    {0x0345, 0x00},
    {0x0346, 0x00},
    {0x0359, 0x00},
    {0x035A, 0x00},
    {0x035B, 0x00},
    {0x035C, 0x00},
    {0x0487, 0x00},
    {0x0508, 0x13},
    {0x0509, 0x22},
    {0x050A, 0x0C},
    {0x050B, 0x0B},
    {0x050C, 0x07},
    {0x050D, 0x3F},
    {0x050E, 0x16},
    {0x050F, 0x2A},
    {0x0510, 0x09},
    {0x0511, 0x08},
    {0x0512, 0x07},
    {0x0513, 0x3F},
    {0x0515, 0x00},
    {0x0516, 0x00},
    {0x0517, 0x00},
    {0x0518, 0x00},
    {0x0519, 0xB0},
    {0x051A, 0x02},
    {0x051B, 0x00},
    {0x051C, 0x00},
    {0x051D, 0x00},
    {0x051E, 0x00},
    {0x051F, 0x80},
    {0x0521, 0x2B},
    {0x052A, 0x00},
    {0x052B, 0x00},
    {0x052C, 0x0F},
    {0x052D, 0x03},
    {0x052E, 0x19},
    {0x052F, 0x19},
    {0x0531, 0x00},
    {0x0532, 0x56},
    {0x0533, 0x03},
    {0x0534, 0x00},
    {0x0535, 0x00},
    {0x0536, 0x06},
    {0x0537, 0x30},
    {0x0538, 0x21},
    {0x0539, 0x00},
    {0x053A, 0x02},
    {0x053B, 0x03},
    {0x053C, 0x00},
    {0x053D, 0x11},
    {0x053E, 0x06},
    {0x0589, 0x0D},
    {0x058A, 0x00},
    {0x059B, 0xF8},
    {0x059D, 0x13},
    {0x059E, 0x24},
    {0x059F, 0x0C},
    {0x05A0, 0x0B},
    {0x05A1, 0x07},
    {0x05A2, 0x3F},
    {0x05A6, 0x00},
    {0x0802, 0x35},
    {0x0803, 0x05},
    {0x0804, 0x00},
    {0x0805, 0x00},
    {0x0806, 0x00},
    {0x0807, 0x00},
    {0x0808, 0x00},
    {0x0809, 0x00},
    {0x080A, 0x00},
    {0x080B, 0x00},
    {0x080C, 0x00},
    {0x080D, 0x00},
    {0x080E, 0x00},
    {0x080F, 0x00},
    {0x0810, 0x00},
    {0x0811, 0x00},
    {0x0812, 0x00},
    {0x0813, 0x00},
    {0x0814, 0x00},
    {0x0815, 0x00},
    {0x0816, 0x00},
    {0x0817, 0x00},
    {0x0818, 0x00},
    {0x0819, 0x00},
    {0x081A, 0x00},
    {0x081B, 0x00},
    {0x081C, 0x00},
    {0x081D, 0x00},
    {0x081E, 0x00},
    {0x081F, 0x00},
    {0x0820, 0x00},
    {0x0821, 0x00},
    {0x0822, 0x00},
    {0x0823, 0x00},
    {0x0824, 0x00},
    {0x0825, 0x00},
    {0x0826, 0x00},
    {0x0827, 0x00},
    {0x0828, 0x00},
    {0x0829, 0x00},
    {0x082A, 0x00},
    {0x082B, 0x00},
    {0x082C, 0x00},
    {0x082D, 0x00},
    {0x082E, 0x00},
    {0x082F, 0x00},
    {0x0830, 0x00},
    {0x0831, 0x00},
    {0x0832, 0x00},
    {0x0833, 0x00},
    {0x0834, 0x00},
    {0x0835, 0x00},
    {0x0836, 0x00},
    {0x0837, 0x00},
    {0x0838, 0x00},
    {0x0839, 0x00},
    {0x083A, 0x00},
    {0x083B, 0x00},
    {0x083C, 0x00},
    {0x083D, 0x00},
    {0x083E, 0x00},
    {0x083F, 0x00},
    {0x0840, 0x00},
    {0x0841, 0x00},
    {0x0842, 0x00},
    {0x0843, 0x00},
    {0x0844, 0x00},
    {0x0845, 0x00},
    {0x0846, 0x00},
    {0x0847, 0x00},
    {0x0848, 0x00},
    {0x0849, 0x00},
    {0x084A, 0x00},
    {0x084B, 0x00},
    {0x084C, 0x00},
    {0x084D, 0x00},
    {0x084E, 0x00},
    {0x084F, 0x00},
    {0x0850, 0x00},
    {0x0851, 0x00},
    {0x0852, 0x00},
    {0x0853, 0x00},
    {0x0854, 0x00},
    {0x0855, 0x00},
    {0x0856, 0x00},
    {0x0857, 0x00},
    {0x0858, 0x00},
    {0x0859, 0x00},
    {0x085A, 0x00},
    {0x085B, 0x00},
    {0x085C, 0x00},
    {0x085D, 0x00},
    {0x085E, 0x00},
    {0x085F, 0x00},
    {0x0860, 0x00},
    {0x0861, 0x00},
    {0x090E, 0x02},
    {0x0943, 0x00},
    {0x0949, 0x03},
    {0x094A, 0x03},
    {0x094E, 0x49},
    {0x094F, 0x02},
    {0x095E, 0x00},
    {0x0A02, 0x00},
    {0x0A03, 0x01},
    {0x0A04, 0x01},
    {0x0A05, 0x01},
    {0x0A14, 0x00},
    {0x0A1A, 0x00},
    {0x0B44, 0x2F},
    {0x0B46, 0x00},
    {0x0B47, 0x0C},
    {0x0B48, 0x0C},
    {0x0B4A, 0x02},
    {0x0B57, 0xF0},
    {0x0B58, 0x00},
    /* End configuration registers */

    /* Start configuration postamble */
    {0x0514, 0x01},
    {0x001C, 0x01},
    {0x0540, 0x00},
    {0x0B24, 0xC3},
    {0x0B25, 0x02},
    /* End configuration postamble */
};

static si5342_register_op_t const
si5342_156_ppm_cfg[] = {
    /* Start configuration preamble */
    {0x0B24, 0xC0},
    {0x0B25, 0x00},
    {0x0540, 0x01},
    /* End configuration preamble */
    /* Delay 300 msec */
    /* Start configuration registers */
    {0x0006, 0x00},
    {0x0007, 0x00},
    {0x0008, 0x00},
    {0x000B, 0x68},
    {0x0016, 0x02},
    {0x0017, 0xDC},
    {0x0018, 0xFC},
    {0x0019, 0xDD},
    {0x001A, 0xDF},
    {0x002B, 0x02},
    {0x002C, 0x03},
    {0x002D, 0x05},
    {0x002E, 0x38},
    {0x002F, 0x00},
    {0x0030, 0x38},
    {0x0031, 0x00},
    {0x0032, 0x00},
    {0x0033, 0x00},
    {0x0034, 0x00},
    {0x0035, 0x00},
    {0x0036, 0x35},
    {0x0037, 0x00},
    {0x0038, 0x35},
    {0x0039, 0x00},
    {0x003A, 0x00},
    {0x003B, 0x00},
    {0x003C, 0x00},
    {0x003D, 0x00},
    {0x003F, 0x00},
    {0x0040, 0x04},
    {0x0041, 0x0F},
    {0x0042, 0x0F},
    {0x0043, 0x00},
    {0x0044, 0x00},
    {0x0045, 0x0C},
    {0x0046, 0x32},
    {0x0047, 0x32},
    {0x0048, 0x00},
    {0x0049, 0x00},
    {0x004A, 0x32},
    {0x004B, 0x32},
    {0x004C, 0x00},
    {0x004D, 0x00},
    {0x004E, 0x55},
    {0x004F, 0x00},
    {0x0050, 0x0C},
    {0x0051, 0x03},
    {0x0052, 0x03},
    {0x0053, 0x00},
    {0x0054, 0x00},
    {0x0055, 0x03},
    {0x0056, 0x03},
    {0x0057, 0x00},
    {0x0058, 0x00},
    {0x0059, 0x05},
    {0x005A, 0xE3},
    {0x005B, 0xF8},
    {0x005C, 0xBE},
    {0x005D, 0x00},
    {0x005E, 0xE3},
    {0x005F, 0xF8},
    {0x0060, 0xBE},
    {0x0061, 0x00},
    {0x0062, 0x00},
    {0x0063, 0x00},
    {0x0064, 0x00},
    {0x0065, 0x00},
    {0x0066, 0x00},
    {0x0067, 0x00},
    {0x0068, 0x00},
    {0x0069, 0x00},
    {0x0092, 0x02},
    {0x0093, 0xA0},
    {0x0095, 0x00},
    {0x0096, 0x80},
    {0x0098, 0x60},
    {0x009A, 0x02},
    {0x009B, 0x40},
    {0x009D, 0x04},
    {0x009E, 0x40},
    {0x00A0, 0x20},
    {0x00A2, 0x00},
    {0x00A9, 0xB1},
    {0x00AA, 0x02},
    {0x00AB, 0x0C},
    {0x00AC, 0x00},
    {0x00E5, 0x00},
    {0x00EA, 0x55},
    {0x00EB, 0x01},
    {0x00EC, 0x0C},
    {0x00ED, 0x00},
    {0x0102, 0x01},
    {0x0112, 0x02},
    {0x0113, 0x09},
    {0x0114, 0x33},
    {0x0115, 0x08},
    {0x0117, 0x02},
    {0x0118, 0x09},
    {0x0119, 0x33},
    {0x011A, 0x09},
    {0x013F, 0x00},
    {0x0140, 0x00},
    {0x0141, 0x40},
    {0x0142, 0xFF},
    {0x0206, 0x00},
    {0x0208, 0xA2},
    {0x0209, 0x00},
    {0x020A, 0x00},
    {0x020B, 0x00},
    {0x020C, 0x00},
    {0x020D, 0x00},
    {0x020E, 0x01},
    {0x020F, 0x00},
    {0x0210, 0x00},
    {0x0211, 0x00},
    {0x0212, 0xA2},
    {0x0213, 0x00},
    {0x0214, 0x00},
    {0x0215, 0x00},
    {0x0216, 0x00},
    {0x0217, 0x00},
    {0x0218, 0x01},
    {0x0219, 0x00},
    {0x021A, 0x00},
    {0x021B, 0x00},
    {0x021C, 0x00},
    {0x021D, 0x00},
    {0x021E, 0x00},
    {0x021F, 0x00},
    {0x0220, 0x00},
    {0x0221, 0x00},
    {0x0222, 0x00},
    {0x0223, 0x00},
    {0x0224, 0x00},
    {0x0225, 0x00},
    {0x0226, 0x00},
    {0x0227, 0x00},
    {0x0228, 0x00},
    {0x0229, 0x00},
    {0x022A, 0x00},
    {0x022B, 0x00},
    {0x022C, 0x00},
    {0x022D, 0x00},
    {0x022E, 0x00},
    {0x022F, 0x00},
    {0x0231, 0x0B},
    {0x0232, 0x0B},
    {0x0233, 0x0B},
    {0x0234, 0x0B},
    {0x0235, 0x00},
    {0x0236, 0x00},
    {0x0237, 0x00},
    {0x0238, 0x1D},
    {0x0239, 0xD8},
    {0x023A, 0x00},
    {0x023B, 0x00},
    {0x023C, 0x00},
    {0x023D, 0x00},
    {0x023E, 0xD8},
    {0x0250, 0x03},
    {0x0251, 0x00},
    {0x0252, 0x00},
    {0x0253, 0x03},
    {0x0254, 0x00},
    {0x0255, 0x00},
    {0x026B, 0x53},
    {0x026C, 0x59},
    {0x026D, 0x4E},
    {0x026E, 0x43},
    {0x026F, 0x52},
    {0x0270, 0x45},
    {0x0271, 0x56},
    {0x0272, 0x31},
    {0x028A, 0x00},
    {0x028B, 0x00},
    {0x028C, 0x00},
    {0x028D, 0x00},
    {0x028E, 0x00},
    {0x028F, 0x00},
    {0x0290, 0x00},
    {0x0291, 0x00},
    {0x0294, 0x60},
    {0x0296, 0x00},
    {0x0297, 0x02},
    {0x0299, 0x02},
    {0x029D, 0xD7},
    {0x029E, 0x3B},
    {0x029F, 0x00},
    {0x02A9, 0x99},
    {0x02AA, 0x99},
    {0x02AB, 0x00},
    {0x02B7, 0xFF},
    {0x0302, 0x00},
    {0x0303, 0x00},
    {0x0304, 0x00},
    {0x0305, 0xA5},
    {0x0306, 0x08},
    {0x0307, 0x00},
    {0x0308, 0x00},
    {0x0309, 0x00},
    {0x030A, 0x00},
    {0x030B, 0xC8},
    {0x030C, 0x00},
    {0x030D, 0x00},
    {0x030E, 0x00},
    {0x030F, 0x00},
    {0x0310, 0xA5},
    {0x0311, 0x08},
    {0x0312, 0x00},
    {0x0313, 0x00},
    {0x0314, 0x00},
    {0x0315, 0x00},
    {0x0316, 0xC8},
    {0x0317, 0x00},
    {0x0338, 0x00},
    {0x0339, 0x1C},
    {0x033B, 0x08},
    {0x033C, 0x91},
    {0x033D, 0x00},
    {0x033E, 0x00},
    {0x033F, 0x00},
    {0x0340, 0x00},
    {0x0341, 0x08},
    {0x0342, 0x91},
    {0x0343, 0x00},
    {0x0344, 0x00},
    {0x0345, 0x00},
    {0x0346, 0x00},
    {0x0359, 0x00},
    {0x035A, 0x00},
    {0x035B, 0x00},
    {0x035C, 0x00},
    {0x0487, 0x00},
    {0x0508, 0x13},
    {0x0509, 0x22},
    {0x050A, 0x0C},
    {0x050B, 0x0B},
    {0x050C, 0x07},
    {0x050D, 0x3F},
    {0x050E, 0x16},
    {0x050F, 0x2A},
    {0x0510, 0x09},
    {0x0511, 0x08},
    {0x0512, 0x07},
    {0x0513, 0x3F},
    {0x0515, 0x00},
    {0x0516, 0x00},
    {0x0517, 0x00},
    {0x0518, 0x9C},
    {0x0519, 0xA5},
    {0x051A, 0x03},
    {0x051B, 0x00},
    {0x051C, 0x00},
    {0x051D, 0x00},
    {0x051E, 0xE0},
    {0x051F, 0xAB},
    {0x0521, 0x3B},
    {0x052A, 0x00},
    {0x052B, 0x00},
    {0x052C, 0x0F},
    {0x052D, 0x03},
    {0x052E, 0x19},
    {0x052F, 0x19},
    {0x0531, 0x00},
    {0x0532, 0x46},
    {0x0533, 0x03},
    {0x0534, 0x00},
    {0x0535, 0x00},
    {0x0536, 0x06},
    {0x0537, 0x30},
    {0x0538, 0x21},
    {0x0539, 0x00},
    {0x053A, 0x02},
    {0x053B, 0x03},
    {0x053C, 0x00},
    {0x053D, 0x11},
    {0x053E, 0x06},
    {0x0589, 0x0D},
    {0x058A, 0x00},
    {0x059B, 0xF8},
    {0x059D, 0x13},
    {0x059E, 0x24},
    {0x059F, 0x0C},
    {0x05A0, 0x0B},
    {0x05A1, 0x07},
    {0x05A2, 0x3F},
    {0x05A6, 0x00},
    {0x0802, 0x35},
    {0x0803, 0x05},
    {0x0804, 0x00},
    {0x0805, 0x00},
    {0x0806, 0x00},
    {0x0807, 0x00},
    {0x0808, 0x00},
    {0x0809, 0x00},
    {0x080A, 0x00},
    {0x080B, 0x00},
    {0x080C, 0x00},
    {0x080D, 0x00},
    {0x080E, 0x00},
    {0x080F, 0x00},
    {0x0810, 0x00},
    {0x0811, 0x00},
    {0x0812, 0x00},
    {0x0813, 0x00},
    {0x0814, 0x00},
    {0x0815, 0x00},
    {0x0816, 0x00},
    {0x0817, 0x00},
    {0x0818, 0x00},
    {0x0819, 0x00},
    {0x081A, 0x00},
    {0x081B, 0x00},
    {0x081C, 0x00},
    {0x081D, 0x00},
    {0x081E, 0x00},
    {0x081F, 0x00},
    {0x0820, 0x00},
    {0x0821, 0x00},
    {0x0822, 0x00},
    {0x0823, 0x00},
    {0x0824, 0x00},
    {0x0825, 0x00},
    {0x0826, 0x00},
    {0x0827, 0x00},
    {0x0828, 0x00},
    {0x0829, 0x00},
    {0x082A, 0x00},
    {0x082B, 0x00},
    {0x082C, 0x00},
    {0x082D, 0x00},
    {0x082E, 0x00},
    {0x082F, 0x00},
    {0x0830, 0x00},
    {0x0831, 0x00},
    {0x0832, 0x00},
    {0x0833, 0x00},
    {0x0834, 0x00},
    {0x0835, 0x00},
    {0x0836, 0x00},
    {0x0837, 0x00},
    {0x0838, 0x00},
    {0x0839, 0x00},
    {0x083A, 0x00},
    {0x083B, 0x00},
    {0x083C, 0x00},
    {0x083D, 0x00},
    {0x083E, 0x00},
    {0x083F, 0x00},
    {0x0840, 0x00},
    {0x0841, 0x00},
    {0x0842, 0x00},
    {0x0843, 0x00},
    {0x0844, 0x00},
    {0x0845, 0x00},
    {0x0846, 0x00},
    {0x0847, 0x00},
    {0x0848, 0x00},
    {0x0849, 0x00},
    {0x084A, 0x00},
    {0x084B, 0x00},
    {0x084C, 0x00},
    {0x084D, 0x00},
    {0x084E, 0x00},
    {0x084F, 0x00},
    {0x0850, 0x00},
    {0x0851, 0x00},
    {0x0852, 0x00},
    {0x0853, 0x00},
    {0x0854, 0x00},
    {0x0855, 0x00},
    {0x0856, 0x00},
    {0x0857, 0x00},
    {0x0858, 0x00},
    {0x0859, 0x00},
    {0x085A, 0x00},
    {0x085B, 0x00},
    {0x085C, 0x00},
    {0x085D, 0x00},
    {0x085E, 0x00},
    {0x085F, 0x00},
    {0x0860, 0x00},
    {0x0861, 0x00},
    {0x090E, 0x02},
    {0x0943, 0x00},
    {0x0949, 0x03},
    {0x094A, 0x03},
    {0x094E, 0x49},
    {0x094F, 0x02},
    {0x095E, 0x00},
    {0x0A02, 0x00},
    {0x0A03, 0x03},
    {0x0A04, 0x00},
    {0x0A05, 0x03},
    {0x0A14, 0x00},
    {0x0A1A, 0x00},
    {0x0B44, 0x0F},
    {0x0B46, 0x00},
    {0x0B47, 0x0C},
    {0x0B48, 0x0C},
    {0x0B4A, 0x00},
    {0x0B57, 0xF0},
    {0x0B58, 0x00},
    /* End configuration registers */

    /* Start configuration postamble */
    {0x0514, 0x01},
    {0x001C, 0x01},
    {0x0540, 0x00},
    {0x0B24, 0xC3},
    {0x0B25, 0x02},
    /* End configuration postamble */
};

/** si5342 i2c read
  *
  *  @param chip_id
  *    chip_id
  *  @param reg
  *     register to access
  *  @param data
  *    data to read from reg
  *  @return
  *    0 on success and any other value on error
  */
int bf_pltfm_si5342_i2c_rd (int chip_id,
                            uint32_t reg, uint8_t *data)
{
    uint8_t out[4];
    int ret;

    (void)chip_id;
    /* set the necessary i2c mux after locking the mux access */
    ret = bf_pltfm_i2c_lock_select_misc_chn();
    if (ret) {
        LOG_ERROR ("error getting chn lock in si5342_i2c_rd\n");
        return ret;
    }
    /* setup the page register */
    out[0] = SI5342_FIXED_PAGE_REG;
    out[1] = (uint8_t) (reg >> 8);
    ret = bf_pltfm_cp2112_write (si5342_i2c_hdl,
                                 I2C_ADDR_SI5342, out, 2, 100);
    if (ret) {
        LOG_ERROR ("error writing page register %x in si5342_i2c_rd\n",
                   reg);
        goto si5342_read_error;
    }
    /* write lower 8 bits of register */
    out[0] = (uint8_t)reg;
    ret = bf_pltfm_cp2112_write (si5342_i2c_hdl,
                                 I2C_ADDR_SI5342, out, 1, 100);
    if (ret) {
        LOG_ERROR ("error writing register %x in si5342_i2c_rd\n",
                   reg);
        goto si5342_read_error;
    }
    /* read the data into the destination register */
    ret = bf_pltfm_cp2112_read (si5342_i2c_hdl,
                                I2C_ADDR_SI5342, data, 1, 100);
    if (ret) {
        LOG_ERROR ("error reading register %x in si5342_i2c_rd\n",
                   reg);
        goto si5342_read_error;
    }
    /* unset i2c mux setting and unlock it */
si5342_read_error:
    bf_pltfm_unselect_i2c_unlock_misc_chn();
    return ret;
}

/** si5342 i2c write
 *
 *  @param chip_id
 *    chip_id
 *  @param reg
 *     register to access
 *  @param data
 *    data to write to reg
 *  @return
 *    0 on success and any other value on error
 */
int bf_pltfm_si5342_i2c_wr (int chip_id,
                            uint32_t reg, uint8_t data)
{
    uint8_t out[4];
    int ret;

    (void)chip_id;
    /* set the necessary i2c mux after locking the mux access */
    ret = bf_pltfm_i2c_lock_select_misc_chn();
    if (ret) {
        LOG_ERROR ("error getting chn lock in si5342_i2c_wr\n");
        return ret;
    }
    /* setup the page register */
    out[0] = SI5342_FIXED_PAGE_REG;
    out[1] = (uint8_t) (reg >> 8);
    ret = bf_pltfm_cp2112_write (si5342_i2c_hdl,
                                 I2C_ADDR_SI5342, out, 2, 100);
    if (ret) {
        LOG_ERROR ("error writing page register %x in si5342_i2c_wr\n",
                   reg);
        goto si5342_write_error;
    }
    /* write the data into the destination register */
    out[0] = (uint8_t)reg;
    out[1] = data;
    ret = bf_pltfm_cp2112_write (si5342_i2c_hdl,
                                 I2C_ADDR_SI5342, out, 2, 100);
    if (ret) {
        LOG_ERROR (
            "error writing data %x register %x in si5342_i2c_wr\n",
            data, reg);
        goto si5342_write_error;
    }
    /* unset i2c mux setting and unlock it */
si5342_write_error:
    bf_pltfm_unselect_i2c_unlock_misc_chn();
    return ret;
}

/** si5342 ppm set
 *
 *  @param chip_id
 *    chip_id
 *  @param ppm
 *    ppm to set
 *  @return
 *    0 on success and any other value on error
 */
int bf_pltfm_si5342_ppm_set (int chip_id,
                             int ppm)
{
    int i, diff;

    if (ppm < -100 || ppm > 100) {
        return -1;
    }
    if (ppm == bf_pltfm_si5342_ppm) {
        return 0;
    }
    if (bf_pltfm_si5342_ppm <
        ppm) { /* increment the ppm */
        diff = ppm - bf_pltfm_si5342_ppm;
        for (i = 0; i < diff; i++) {
            if (bf_pltfm_si5342_i2c_wr (chip_id, 0x001D, 1)) {
                bf_pltfm_si5342_ppm += i;
                return -1;
            }
        }
    } else { /* decrement the ppm */
        diff = bf_pltfm_si5342_ppm - ppm;
        for (i = 0; i < diff; i++) {
            if (bf_pltfm_si5342_i2c_wr (chip_id, 0x001D, 2)) {
                bf_pltfm_si5342_ppm -= i;
                return -1;
            }
        }
    }
    bf_pltfm_si5342_ppm = ppm;
    return 0;
}

/** si5342 ppm get
 *
 *  @param chip_id
 *    chip_id
 *  @param ppm
 *    return ppm
 *  @return
 *    0 on success and any other value on error
 */
int bf_pltfm_si5342_ppm_get (int chip_id,
                             int *ppm)
{
    (void)chip_id;

    *ppm = bf_pltfm_si5342_ppm;
    return 0;
}

static ucli_status_t
bf_pltfm_ucli_ucli__5342_i2c_rd (ucli_context_t
                                 *uc)
{
    bf_dev_id_t dev = 0;
    uint32_t reg;
    uint8_t data;

    UCLI_COMMAND_INFO (uc, "si5342-i2c-rd", 2,
                       "si5342-i2c-rd <dev> 0x<reg>");

    dev = atoi (uc->pargs->args[0]);
    reg = strtol (uc->pargs->args[1], NULL, 16);

    aim_printf (&uc->pvs,
                "bf_pltfm_si5342: si5342-i2c-rd <dev=%d> <reg=0x%x>n",
                dev,
                reg);
    if (bf_pltfm_si5342_i2c_rd (dev, reg, &data)) {
        aim_printf (&uc->pvs, "error I2C read\n");
        return UCLI_STATUS_E_INTERNAL;
    } else {
        aim_printf (&uc->pvs, "addr: data 0x%x: 0x%x\n",
                    reg, data);
    }
    aim_printf (&uc->pvs, "I2c Read OK\n");
    return UCLI_STATUS_OK;
}

static ucli_status_t
bf_pltfm_ucli_ucli__5342_i2c_wr (ucli_context_t
                                 *uc)
{
    bf_dev_id_t dev = 0;
    uint32_t reg;
    uint8_t data;

    UCLI_COMMAND_INFO (
        uc, "si5342-i2c-wr", 3,
        "si5342-i2c-wr <dev> 0x<reg> 0x<data>");

    dev = atoi (uc->pargs->args[0]);
    reg = strtol (uc->pargs->args[1], NULL, 16);
    data = strtol (uc->pargs->args[2], NULL, 16);

    aim_printf (&uc->pvs,
                "bf_pltfm_si5342: si5342-i2c-wr <dev=%d> <reg=0x%x> "
                "<data=0x%x>\n",
                dev,
                reg,
                data);

    if (bf_pltfm_si5342_i2c_wr (dev, reg, data)) {
        aim_printf (&uc->pvs, "error I2C write\n");
        return UCLI_STATUS_E_INTERNAL;
    } else {
        aim_printf (&uc->pvs, "I2c write OK\n");
    }
    return UCLI_STATUS_OK;
}

static ucli_status_t
bf_pltfm_ucli_ucli__5342_ppm_set (ucli_context_t
                                  *uc)
{
    bf_dev_id_t dev = 0;
    int ppm;

    UCLI_COMMAND_INFO (uc, "si5342-ppm-set", 2,
                       "si5342-ppm-set <dev> <ppm>");

    dev = atoi (uc->pargs->args[0]);
    ppm = atoi (uc->pargs->args[1]);

    aim_printf (&uc->pvs,
                "bf_pltfm_si5342: si5342-ppm-set <dev=%d> <ppm=%d>\n",
                dev,
                ppm);

    if (bf_pltfm_si5342_ppm_set (dev, ppm)) {
        aim_printf (&uc->pvs, "error ppm-set\n");
        return UCLI_STATUS_E_INTERNAL;
    } else {
        aim_printf (&uc->pvs, "ppm-set to %d OK\n", ppm);
    }
    return UCLI_STATUS_OK;
}

static ucli_status_t
bf_pltfm_ucli_ucli__5342_ppm_get (ucli_context_t
                                  *uc)
{
    bf_dev_id_t dev = 0;
    int ppm = 0;

    UCLI_COMMAND_INFO (uc, "si5342-ppm-get", 1,
                       "si5342-ppm-get <dev>");

    dev = atoi (uc->pargs->args[0]);

    aim_printf (&uc->pvs,
                "bf_pltfm_si5342: si5342-ppm-get <dev=%d>\n",
                dev);

    if (bf_pltfm_si5342_ppm_get (dev, &ppm)) {
        aim_printf (&uc->pvs, "error ppm-get\n");
        return UCLI_STATUS_E_INTERNAL;
    } else {
        aim_printf (&uc->pvs, "current ppm is %d\n", ppm);
    }
    return UCLI_STATUS_OK;
}

#if 0 /* turn ON only if needed */
/** si5342 checkif device is ready
  *
  *  @param chip_id
  *    chip_id
  *  @param reg
  *     register to access
  *  @param data
  *    data to read from reg
  *  @return
  *    0 on success and any other value on error
  */
static int bf_pltfm_si5342_dev_rdy (int chip_id,
                                    uint8_t *data)
{
    uint8_t out[4];
    int ret;

    (void)chip_id;
    /* set the necessary i2c mux after locking the mux access */
    ret = bf_pltfm_i2c_lock_select_misc_chn();
    if (ret) {
        LOG_ERROR ("error getting chn lock in si5342_i2c_rd\n");
        return ret;
    }
    out[0] = SI5342_DEV_RDY_REG;
    ret = bf_pltfm_cp2112_write (si5342_i2c_hdl,
                                 I2C_ADDR_SI5342, out, 1, 100);
    if (ret) {
        LOG_ERROR ("error writing dev rdy  register in si5342_dev_rdy\n");
        goto si5342_rdy_error;
    }
    /* read the data into the destination register */
    ret = bf_pltfm_cp2112_read (si5342_i2c_hdl,
                                I2C_ADDR_SI5342, data, 1, 100);
    if (ret) {
        LOG_ERROR ("error reading dev rdy register in si5342_dev_rdy\n");
        goto si5342_rdy_error;
    }
    /* unset i2c mux setting and unlock it */
si5342_rdy_error:
    bf_pltfm_unselect_i2c_unlock_misc_chn();
    return ret;
}

/* API to save current configuratio to NVM */
/* *** IMPORTANT **** This device supports writing to NVM only twice */
static ucli_status_t
bf_pltfm_ucli_ucli__5342_cfg_wr (ucli_context_t
                                 *uc)
{
    bf_dev_id_t dev = 0;
    uint32_t cfm_val;
    uint8_t data, i;

    UCLI_COMMAND_INFO (
        uc, "si5342-cfg-wr", 3,
        "si5342-cfg-wr <dev> 0x<cfmdata = 0x7AD1FB09>");

    dev = atoi (uc->pargs->args[0]);
    cfm_val = strtol (uc->pargs->args[1], NULL, 16);
    if (cfm_val != 0x7AD1FB09) {
        aim_printf (&uc->pvs, "bad Confirm value\n");
        return UCLI_STATUS_E_PARAM;
    }
    aim_printf (&uc->pvs,
                "bf_pltfm_si5342: si5342-cfg-wr <dev=%d> <cfmdata=0x%x> \n",
                dev,
                cfm_val);
    bf_sys_sleep (
        10); /* deliberate delay to allow ctrl-C */
    /* write 0xC7 to NVM_WRITE */
    if (bf_pltfm_si5342_i2c_wr (0, SI5342_NVM_WR_REG,
                                0xC7) != 0) {
        aim_printf (&uc->pvs,
                    "error writing to NVM_WRITE register\n");
        return UCLI_STATUS_E_INTERNAL;
    }
    i = 0;
    /* wait until device ready flag is ON or 100ms */
    /* pl. note that no register other than "device ready" may be accessed
     * until the "device ready flag" is ON
     */
    while (i < 100) {
        if (bf_pltfm_si5342_dev_rdy (0, &data) != 0) {
            aim_printf (&uc->pvs,
                        "error reading to DEV READY register\n");
            return UCLI_STATUS_E_INTERNAL;
        }
        if (data != SI5342_DEV_RDY) {
            bf_sys_usleep (1000);
        } else {
            aim_printf (&uc->pvs, "Config saved OK.\n");
            return UCLI_STATUS_OK;
        }
        i++;
    }
    aim_printf (&uc->pvs,
                "Timeout error in DEV READY register\n");
    return UCLI_STATUS_E_INTERNAL;
}
#endif

static int si_5342_cfg_write (ucli_context_t *uc,
                              int dev,
                              si5342_register_op_t const *cfg,
                              int cnt)
{
    int i;
    for (i = 0; i < cnt; i++) {
        if (i == PREMABLE_CFG_CNT) {
            bf_sys_usleep (
                300000); /* 300 ms delay after preamble */
        }
        if (bf_pltfm_si5342_i2c_wr (dev, cfg[i].address,
                                    cfg[i].value) != 0) {
            aim_printf (&uc->pvs,
                        "error programming 5342 in %d iteration reg %x\n",
                        i,
                        cfg[i].address);
            return -1;
        }
        if (i % 100 == 0) {
            aim_printf (&uc->pvs, ".");
        }
    }
    aim_printf (&uc->pvs, "\n");
    return 0;
}

/** si5342 set si5342 configuration to lock on xstal input and provide
 * 156.25mhz o/p with +/- 100 ppm
 *
 *  @param chip_id
 *    chip_id
 *  @return
 *    0 on success and any other value on error
 */
int bf_pltfm_si5342_156mhz_ppm_config_set (
    int chip_id)
{
    size_t size_cfg, i;
    si5342_register_op_t const *cfg =
        &si5342_156_ppm_cfg[0];

    size_cfg = sizeof (si5342_156_ppm_cfg) / sizeof (
                   si5342_register_op_t);
    for (i = 0; i < size_cfg; i++) {
        if (i == PREMABLE_CFG_CNT) {
            bf_sys_usleep (
                300000); /* 300 ms delay after preamble */
        }
        if (bf_pltfm_si5342_i2c_wr (chip_id,
                                    cfg[i].address, cfg[i].value) != 0) {
            LOG_ERROR ("error programming si_5342_156_ppm_cfg iteration %lu reg %x\n",
                       i,
                       cfg[i].address);
            return -1;
        }
    }
    bf_pltfm_si5342_ppm = 0;
    return 0;
}

/* custom configuartion of SI5342 to setit up for specific clock settings */
static ucli_status_t
bf_pltfm_ucli_ucli__5342_cfg_prog (
    ucli_context_t *uc)
{
    int mode, dev;
    si5342_register_op_t const *delta_cfg = NULL;
    size_t size_cfg;

    UCLI_COMMAND_INFO (
        uc,
        "si5342-cfg-prog",
        2,
        "si5342-cfg-prog <dev> <mode 0:322/322, 1: 322,257, 2: "
        "257/322, 3:257/257  322.265625 Mhz,257.8125 Mhz, 4: 156Mhz ppm enabled");

    dev = atoi (uc->pargs->args[0]);
    mode = atoi (uc->pargs->args[1]);
    if (mode > 4) {
        aim_printf (&uc->pvs, "bad param\n");
        return UCLI_STATUS_E_PARAM;
    }
    switch (mode) {
        case 0:
            delta_cfg = &si5342_322_322_cfg[0];
            size_cfg = sizeof (si5342_322_322_cfg) / sizeof (
                           si5342_register_op_t);
            break;
        case 1:
            delta_cfg = &si5342_322_257_cfg[0];
            size_cfg = sizeof (si5342_322_257_cfg) / sizeof (
                           si5342_register_op_t);
            break;
        case 2:
            delta_cfg = &si5342_257_322_cfg[0];
            size_cfg = sizeof (si5342_257_322_cfg) / sizeof (
                           si5342_register_op_t);
            break;
        case 3:
            delta_cfg = &si5342_257_257_cfg[0];
            size_cfg = sizeof (si5342_257_257_cfg) / sizeof (
                           si5342_register_op_t);
            break;
        case 4:
            delta_cfg = &si5342_156_ppm_cfg[0];
            size_cfg = sizeof (si5342_156_ppm_cfg) / sizeof (
                           si5342_register_op_t);
            bf_pltfm_si5342_ppm = 0;
            break;
        default:
            aim_printf (&uc->pvs, "bad mode\n");
            return UCLI_STATUS_E_PARAM;
    }
    /* program the base config as well */
    aim_printf (&uc->pvs,
                "programming config for mode %d\n", mode);
    if (si_5342_cfg_write (uc, dev, delta_cfg,
                           size_cfg) != 0) {
        return UCLI_STATUS_E_INTERNAL;
    }
    return UCLI_STATUS_OK;
}

static ucli_status_t
bf_pltfm_ucli_ucli__5342_cfg_reset (
    ucli_context_t *uc)
{
    UCLI_COMMAND_INFO (uc, "si5342-cfg-reset", 1,
                       "si5342-cfg-reset <dev>");
    si5342_base_cfg_done = false;
    return UCLI_STATUS_OK;
}

/* <auto.ucli.handlers.start> */
static ucli_command_handler_f
bf_pltfm_si5342_ucli_ucli_handlers__[] = {
    bf_pltfm_ucli_ucli__5342_i2c_wr,
    bf_pltfm_ucli_ucli__5342_i2c_rd,
    bf_pltfm_ucli_ucli__5342_cfg_prog,
    bf_pltfm_ucli_ucli__5342_cfg_reset,
    bf_pltfm_ucli_ucli__5342_ppm_set,
    bf_pltfm_ucli_ucli__5342_ppm_get,
#if 0 /* turn ON if needed. This is a dangerous operation */
    bf_pltfm_ucli_ucli__5342_cfg_wr,
#endif
    NULL,
};

static ucli_module_t bf_pltfm_si5342_ucli_module__
= {
    "si5342_ucli", NULL, bf_pltfm_si5342_ucli_ucli_handlers__, NULL, NULL,
};

ucli_node_t *bf_pltfm_si5342_ucli_node_create (
    ucli_node_t *m)
{
    ucli_node_t *n;
    ucli_module_init (&bf_pltfm_si5342_ucli_module__);
    n = ucli_node_create ("si5342", m,
                          &bf_pltfm_si5342_ucli_module__);
    ucli_node_subnode_add (n,
                           ucli_module_log_node_create ("si5342"));
    return n;
}

int bf_pltfm_si5342_init (void *arg)
{
    (void)arg;
    si5342_i2c_hdl = bf_pltfm_cp2112_get_handle (
                         CP2112_ID_1);
    if (!si5342_i2c_hdl) {
        LOG_ERROR ("error in bf_pltfm_si5342_init\n");
        return -1;
    }
    si5342_base_cfg_done = false;
    return 0;
}
